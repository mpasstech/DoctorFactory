<?php
$login = $this->Session->read('Auth.User');
if($app_data['tracker_template_id'] == 1){ ?>
<html>
<head>
    <title>Appointment Tracker</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <?php echo $this->Html->css(array('tracker.css')); ?>
    <style>
       /* html, body {margin: 0; height: 100%; overflow: hidden}*/
      .mu-hero-overlay {
        height: 100%;

      }
        #go-button{position: absolute;
            position: absolute;
            position: absolute;
            top: 29px;
            float: right;
            z-index: 9999999;
            right: 0;
            height: 40px;
            width: 45px;
            cursor: pointer;

        }
        #go-button img{
            border: 1px solid;
            border-radius: 6px 0px 0px 6px;
        }
        #go-button span{
            font-size: 9px;
            color: #fff;
            width: 100%;
            display: block;
            text-align: center;
        }

       @media only screen and (max-width: 500px) {
            .mu-logo{
                font-size: 18px;
            }
            #mu-event-counter, .mu-event-counter-area{
                width: 100%;
            }
            .mu-event-counter-block{
                width: 170px;
                height: 170px;
                margin: 0 auto;
            }
        }
       @media (min-width: 1281px) {



       }
       @media (min-width: 1025px) and (max-width: 1280px) {



       }
       @media (min-width: 768px) and (max-width: 1024px) {



       }
       @media (min-width: 768px) and (max-width: 1024px) and (orientation: landscape) {



       }
       @media (min-width: 481px) and (max-width: 767px) {




       }
       @media (min-width: 1000px) and (max-width: 1200px) and (orientation: landscape) {

           body {
            background: red !important;
           }


       }
       @media (min-width: 1000px) and (max-width: 1200px) and (min-height: 1500px)  and (max-height: 2000px) {

           .mu-event-counter-area{
               margin-top: 30%;
           }
           .container {

               width: 100%;

           }
           #go-button {
                display: none;
           }
           .mu-event-counter-block {
                width: 80% !important;
               height: 650px;
               margin: 0 auto;
           }
           .mu-event-counter-block{
               margin: 0 11%;
           }
           #mu-event-counter{
                width: 100%;
           }
           .mu-hero-featured-content {

               display: inline;
               float: right;
               margin-top: -400px;
               text-align: center;
               width: 100%;
               padding-top: 30px;

           }
           .mu-event-counter-block span {

               display: block;
               font-size: 300px;
               font-weight: 700;
               padding-top: 300px;
               line-height: 40px;

           }
           .mu-hero-featured-content {
            margin:  0;
           }


       }
       @media (max-width: 480px){
           .mu-event-counter-block span {
               font-size: 65px !important;
           }

           .mu-event-counter-area, .mu-hero-featured-content {
               width: 100%;
           }
       }
       @media (max-width: 360px){

           .mu-hero-featured-area {
               padding: 64px 0;
           }
       }
       @media (min-width: 320px) and (max-width: 480px) {

           .mu-logo{
               font-size: 18px;
           }
           #mu-event-counter, .mu-event-counter-area{
               width: 100%;
               margin: 8px auto;
           }
           .mu-event-counter-block{
               width: 170px;
               height: 170px;
               margin-left: 21%;

               padding-top: 50px;
               line-height: 20px;
           }
           }
       }


    </style>
</head>
<body>

<div>
    <header id="mu-hero" class="" role="banner">
        <div id="go-button">
            <img src="<?php echo Router::url('/images/tracker/large_screen.png',true);?>" ></img>
            <span>Maximize</span>
        </div>
        <div class="mu-hero-overlay" >
            <div class="container">
                <div class="mu-hero-area append_html">

                    <h1 style="text-align: center;"> Please wait... </h1>

                </div>
            </div>

        </div>
    </header>
</div>





<script src="<?php echo Router::url('/js/jquery.js')?>"></script>
<script src="<?php echo Router::url('/js/bootstrap.min.js')?>"></script>
<script>
    $(document).ready(function(){


        var image_path = "<?php echo Router::url('/images/tracker/',true);?>";
        var doctor_id =0;
        var doctor_index =0;
        var doctor_id_string = "<?php echo $doctor_ids; ?>";
        var doctor_id_array = doctor_id_string.split(",");
        var total_doctor = doctor_id_array.length;
        if(total_doctor > 0){
            doctor_id = doctor_id_array[doctor_index];
        }

        load_list();
        var timer_count =0;
        var no_appointment_doctor = {};

        function setIndex(){


            doctor_index++;
            $("#"+doctor_id).hide();
            doctor_id = doctor_id_array[doctor_index];
            $("#"+doctor_id).show();

        }

        var tot_doctor = $('.main_div').length;
        var change_div = 30000;
        var load_list_time = total_doctor * change_div;



        setInterval(function () {
            if(process_running===false){
                doctor_index=0;
                load_list();

            }
        },change_div);





        var process_running = false;


        Object.size = function(obj) {
            var size = 0, key;
            for (key in obj) {
                if (obj.hasOwnProperty(key)) size++;
            }
            return size;
        };



        var interIneer;
        var index = 0;
        function load_list(){

            var showloader =false;
            var t = "<?php echo @($this->request->query['t']); ?>";
            var n = "<?php echo @($app_data['name']); ?>";
            var logo = "<?php echo @($app_data['logo']); ?>";
            var template_id = "<?php echo @($app_data['tracker_template_id']); ?>";
            var baseurl ="<?php echo Router::url('/',true);?>";
            $.ajax({
                type:'POST',
                url: baseurl+"tracker/load_tracker",
                data:{
                    logo:logo,template_id:template_id,t:t,app_name:n,doctor_id_string:doctor_id_string
                },
                beforeSend:function(){
                    clearInterval(interIneer);
                    index =0;
                    if(showloader===true){
                    }
                    process_running = true;

                },
                success:function(data){

                    var x = new Date()
                    var x1=x.toUTCString();
                    var hour = (x.getHours() <10)?"0"+x.getHours():x.getHours();
                    var minute = (x.getMinutes() <10)?"0"+x.getMinutes():x.getMinutes();
                    var sec = (x.getSeconds() <10)?"0"+x.getSeconds():x.getSeconds();

                    $(".loader_div").hide();

                    $(".append_html").html(data);

                    doctor_id_array =[];
                    $('.main_div').each(function( index, value ) {
                        doctor_id_array.push($(this).attr('id'));
                    });
                    index = 0;

                    interIneer =  setInterval(function () {

                        if(doctor_id_array.length > 1){

                            $('.main_div').each(function( index, value ) {
                                ($(this).hide());
                            });
                            $("#"+doctor_id_array[index]).show();
                            index++;
                            if(doctor_id_array.length == index){
                                index=0;
                            }
                        }


                    },3000);

                    process_running = false;


                },
                error: function(data){
                    $(".loader_div").hide();
                    if(showloader===true){
                        // $.alert("Sorry something went wrong on server.");
                    }
                    process_running =false;

                }
            });

        }


        function GoInFullscreen(element) {
            if(element.requestFullscreen)
                element.requestFullscreen();
            else if(element.mozRequestFullScreen)
                element.mozRequestFullScreen();
            else if(element.webkitRequestFullscreen)
                element.webkitRequestFullscreen();
            else if(element.msRequestFullscreen)
                element.msRequestFullscreen();
        }
        function GoOutFullscreen() {
            if(document.exitFullscreen)
                document.exitFullscreen();
            else if(document.mozCancelFullScreen)
                document.mozCancelFullScreen();
            else if(document.webkitExitFullscreen)
                document.webkitExitFullscreen();
            else if(document.msExitFullscreen)
                document.msExitFullscreen();
        }
        function IsFullScreenCurrently() {
            var full_screen_element = document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement || null;

            // If no element is in full-screen
            if(full_screen_element === null)
                return false;
            else
                return true;
        }
        $("#go-button").on('click', function() {

            if(IsFullScreenCurrently())
                GoOutFullscreen();
            else
                GoInFullscreen($("#mu-hero").get(0));
        });
        $(document).on('fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange', function() {
            if(IsFullScreenCurrently()) {
                $("#go-button").attr('src',image_path+"small_screen.png");
                $("#go-button span").html('Minimize');
            }
            else {
                $("#go-button").attr('src',image_path+"large_screen.png");
                $("#go-button span").html('Maximize');
            }
        });



    });
</script>





</body>
</html>
<?php }else if($app_data['tracker_template_id'] == 2){ ?>

    <html>
    <head>
        <title>Appointment Tracker</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
        <script src="<?php echo Router::url('/js/jquery.js')?>"></script>

        <script src="<?php echo Router::url('/js/bootstrap.min.js')?>"></script>
              <?php echo $this->Html->css(array('bootstrap.min.css','font-awesome.min.css'),array("media"=>'all','fullBase' => true)); ?>
        <style>



            .container {
                background: #E8EBF0;
                margin: 0 auto;
                width: 100%;
            }

            body{
                background: #E8EBF0;
                overflow: hidden;
            }
            #go-button{position: absolute;
                position: absolute;
                position: absolute;
                top: 29px;
                float: right;
                z-index: 9999999;
                right: 0;
                height: 40px;
                width: 45px;
                cursor: pointer;

            }
            #go-button img{
                border: 1px solid;
                border-radius: 6px 0px 0px 6px;
                width: 50px;
                height: 50px;
            }
            #go-button span{
                font-size: 9px;
                color: #fff;
                width: 100%;
                display: block;
                text-align: center;
            }

            .append_tracker_list{

            }
            .second .corner_shape{
                width: 14%;
                height: 91px;
                margin-top: -19px;
                position: absolute;
                float: left;
                top: 100;
                left: -10px;

            }
            .second .corner_shape img{
                width: 100%;
            }
            .container{
                background: #E8EBF0;
                margin: 0 auto;
            }
            .doctor_section{
                background: #fff;
                margin: 7px 20px;
                border-radius: 100px 0px 0px 100px;
            }
            .second .doctor_name{
                color: #fff;
                font-size: 35px;
                text-align: center;

            }
            .second .second_parent_div, .third_parent_div{
                padding: 10px 0px;
            }
            .second .token_span{
                border-radius: 74px;
                border: 7px solid #C4CDDB;
                padding-top: 25px;
                width: 115px;
                height: 115px;
                position: absolute;
                text-align: center;
                background-image: linear-gradient(#D9D9D9, #fff);
                font-size: 35px;
            }



            .blink{

                color:red !important;
                padding-top: 40px !important;
                font-size: 18px !important;
            }

            
            .second .overlay{
                z-index: 3;
                position: absolute;
                content: '';
                display: block;
                margin: -56px auto;
                right: 0;
                width: 13%;
                background-image: linear-gradient(to left, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.0));
                transform: rotate(15deg);
                float: right;
                height: 72px;

            }
            .second .doctor_img_div img {
                width: 210px;
                height: 210px;
                border: 8px solid;
            }
            .second .doctor_img_div{
                margin: 0px;
                padding: 3px;
                border: 3px solid;
                border-radius: 140px;
                z-index: 1;
                width: 17%;
            }

            .second .shape_div img{
                width: 100%;
            }
            .second .room_parent{
                max-height: 100px;
            }
            .second .shape_div{
                float: left;
                height: 30px;
                left: -16px;
                position: relative;
                width: 19%;
            }

            #pacman {
                width: 80px;
                height: 80px;

                box-shadow: 15px 15px 0 0 red;
            }


            .second .room_inner img{
                width: 230px;
                transform: rotate(-47deg);
                margin-left: -30px;
                margin-top: -72px;
                height: 280px;

            }
            .second .room_inner{

                -moz-transform: scale(0.6) rotate(49deg) translate(-50px, 2px) skew(-23deg, -26deg);
                -webkit-transform: scale(0.6) rotate(49deg) translate(-50px, 2px) skew(-23deg, -26deg);
                -o-transform: scale(0.6) rotate(49deg) translate(-50px, 2px) skew(-23deg, -26deg);
                -ms-transform: scale(0.6) rotate(49deg) translate(-50px, 2px) skew(-23deg, -26deg);
                transform: scale(0.6) rotate(49deg) translate(-50px, 2px) skew(-23deg, -26deg);
                width: 230px;
                height: 230px;
                border-right: 8px solid;
                border-bottom: 8px solid;

                border-radius: 4px;

            }
            .second .inner_text{
                font-weight: 600;
                font-size: 30px;
                text-align: center;

            }
            .second_row_box{
                margin-left: -54px;
                width: 87%;
            }
            .second_row{

            }




            /* responsive css */




            @media (min-width: 768px) and (max-width: 1024px) and (orientation: portrait){

                .second .corner_shape {
                    width: 18%;

                    height: 74px;

                    margin-top: -43px;

                    position: absolute;

                    float: left;

                    top: 100;

                    left: -5px;

                }

                .second .inner_text {

                    font-size: 20px;

                }
                .second .room_inner {

                    height: 165px;

                    width: 165px;

                }

                .second .room_inner img {

                    width: 189px;

                    transform: rotate(-47deg);

                    margin-left: -24px;

                    margin-top: -29px;

                    height: 187px;

                }
                .second .doctor_img_div img {
                    width: 160px;
                    height: 160px;
                }
                .second .second_parent_div, .third_parent_div {

                    padding: 3px 0px;

                }
                .second .second_row {

                    padding-top: 14px;

                }
                .second .token_span {

                    padding-top: 13px;

                    width: 80px;

                    height: 80px;

                    font-size: 30px;

                    border: 6px solid #C4CDDB;

                    text-align: center;


                }
                .second .doctor_name {
                    font-size: 19px;

                }
                .second_row_box {
                    margin-left: -37px;

                    width: 81%;

                }
                .second .doctor_img_div {

                    width: 24%;
                }

                .second .shape_div {
                    float: left;

                    height: 13px;

                    left: -15px;

                    position: relative;

                    width: 21%;

                }
                .second .room_parent {

                    max-height: 65px;

                }
            }
            @media (min-width: 768px) and (max-width: 1024px) and (orientation: landscape) {

                .second .doctor_img_div img {

                    width: 190px;

                    height: 190px;
                }
                .second .doctor_img_div {
                    padding: 6px;
                    width: 21%;
                }
                .second .corner_shape {
                    width: 14%;

                    height: 83px;

                    margin-top: -23px;

                    position: absolute;

                    float: left;

                    top: 100;

                    left: -2px;

                }
                .second .inner_text {
                    font-weight: 600;
                    font-size: 30px;
                    text-align: center;

                }
                .second .second_parent_div, .third_parent_div {
                    padding: 3px 0px;
                }
                .second .doctor_name{
                    font-size: 26px;
                }
                .second_row_box {
                    margin-left: -39px;

                    width: 82%;

                }
                .second .token_span {
                    padding-top: 17px;

                    width: 100px;

                    height: 100px;
                }
                .second .room_inner{
                    width: 225px;

                    height: 225px;
                }
                .second .room_inner img {

                    width: 238px;
                    transform: rotate(-47deg);
                    margin-left: -45px;
                    margin-top: -80px;
                    height: 296px;

                }
                .second_row {

                    padding-top: 11px;

                }
                .second .shape_div {
                    width: 19%;
                    height: 44px;
                    margin-top: -100px;
                    position: absolute;
                    float: left;
                    top: 100;
                    left: 0px;

                }

            }

            @media (min-width: 1080px) and (min-height: 1920px) and (orientation: portrait){

                .blink{

                    padding-top: 100px !important;
                    font-size: 46px !important;
                }

                .append_tracker_list{
                    overflow: hidden;
                }
                .name_div{
                    width: 100%;
                    font-size: 54px !important;
                }
                .department_div {
                    width: 70%;
                    right: 0;
                    float: right;
                    border: none;
                    font-size: 45px !important;
                    border-top: 2px solid #fff;
                }
                .doctor_section {
                    background: #fff;
                    margin: 20px 3px;
                    border-radius: 0px;
                }
                .second .doctor_img_div img {
                    width: 250px;
                    height: 250px;
                }
                .second .doctor_img_div {
                    padding: 6px;
                    width: 25%;
                }
                .second .corner_shape {
                    display: none;
                    width: 14%;

                    height: 83px;

                    margin-top: -23px;

                    position: absolute;

                    float: left;

                    top: 100;

                    left: -2px;

                }
                .second .inner_text {
                    font-weight: 600;
                    font-size: 50px;
                    text-align: center;
                    width: 100%;
                    display: block;
                }
                .second .second_parent_div, .third_parent_div {
                    padding: 3px 0px;
                }
                .second .doctor_name {
                    font-size: 35px;
                }
                .second_row_box {
                    margin-left: -56px;
                    width: 80%;
                }
                .second .token_span {
                    padding-top: 62px;
                    width: 300px;
                    height: 300px;
                    position: relative;
                    display: inline-block;
                    border-radius: 75%;
                    border: 18px solid #c4cddb;
                    font-size: 100px;
                    margin: 2px 0px;

                }
                .second .room_inner {
                    width: 400px;
                    height: 400px;
                }
                .second .room_inner img {
                    width: 400px;
                    transform: rotate(-47deg);
                    margin-left: -61px;
                    margin-top: -118px;
                    height: 495px;
                }
                .second_row {

                    padding-top: 11px;

                }
                .second .shape_div img{}
                .second .shape_div {
                    width: 28%;
                    height: 44px;
                    margin-top: -100px;
                    position: absolute;
                    float: left;
                    top: 100;
                    left: -9px;
                }
            }

            @media (min-width: 1920px) and (min-height: 1080px) and (orientation: landscape) {

                .append_tracker_list{
                    overflow: hidden;
                }

                .blink{

                    padding-top: 47px !important;
                    font-size: 23px !important;
                }
                .doctor_section {
                    border-radius: 200px 0px 0px 200px;
                    margin: 20px 20px 0px 20px;
                }
                .second .doctor_img_div img {
                    width: 305px;
                    height: 305px;
                }
                .second .doctor_img_div {
                    padding: 10px;
                    width: 18%;
                    border-radius: 70%;
                }
                .second .corner_shape {
                    width: 14%;
                    height: 123px;
                    margin-top: 18px;
                    position: absolute;
                    float: left;
                    top: 100;
                    left: -14px;
                }
                .second .inner_text {
                    font-weight: 600;
                    font-size: 50px;
                    text-align: center;
                }
                .second .second_parent_div, .third_parent_div {
                    padding: 3px 0px;
                }
                .second .doctor_name {
                    font-size: 55px;
                }
                .second_row_box {
                    margin-left: -75px;
                    width: 86%;
                }
                .second .token_span {
                    padding-top: 33px;
                    width: 155px;
                    height: 155px;
                    font-size: 50px;
                    border-radius: 75%;
                    border: 13px solid #C4CDDB;
                }
                .second .room_inner {
                    width: 330px;
                    height: 330px;
                }
                .second .room_inner img {
                    width: 390px;
                    transform: rotate(-47deg);
                    margin-left: -71px;
                    margin-top: -94px;
                    height: 415px;
                }
                .second_row {

                    padding-top: 11px;

                }
                .second .shape_div {
                    width: 22%;
                    height: 44px;
                    margin-top: -100px;
                    position: absolute;
                    float: left;
                    top: 100;
                    left: -12px;
                }

            }


        </style>
    </head>
    <body>
    <div id = "mu-hero">
    <div id="go-button">
        <img src="<?php echo Router::url('/images/tracker/large_screen.png',true);?>" ></img>
        <span>Maximize</span>
    </div>

    <div class="container append_tracker_list second">

        <h1 style="text-align: center;"> Please Wait... </h1>
    </div>


    </div>

    <script>
        $(document).ready(function(){
            var image_path = "<?php echo Router::url('/images/tracker/',true);?>";
            function load_list(){

                var t = "<?php echo @($this->request->query['t']); ?>";
                var n = "<?php echo @($app_data['name']); ?>";
                var logo = "<?php echo @($app_data['logo']); ?>";
                var template_id = "<?php echo @($app_data['tracker_template_id']); ?>";
                var baseurl ="<?php echo Router::url('/',true);?>";
                var doctor_id_string = "<?php echo $doctor_ids; ?>";
                var doctor_id_array = doctor_id_string.split(",");
                var blink_interval;
                $.ajax({
                    type:'POST',
                    url: baseurl+"tracker/load_tracker",
                    data:{
                        logo:logo,template_id:template_id,t:t,app_name:n,doctor_id_string:doctor_id_string
                    },
                    beforeSend:function(){
                        clearInterval(blink_interval);
                    },
                    success:function(data){


                        blink_interval = setInterval(blink_text, 1000);
                        $(".append_tracker_list").html(data);

                    },
                    error: function(data){

                    }
                });

            }
            load_list();

            setInterval(function(){load_list();},3000);

            function blink_text() {
                $('.blink span').fadeOut(500);
                $('.blink span').fadeIn(500);
            }



           function resize(){
                $('.container').height($(document).height());
           }

            function GoInFullscreen(element) {
                if(element.requestFullscreen)
                    element.requestFullscreen();
                else if(element.mozRequestFullScreen)
                    element.mozRequestFullScreen();
                else if(element.webkitRequestFullscreen)
                    element.webkitRequestFullscreen();
                else if(element.msRequestFullscreen)
                    element.msRequestFullscreen();

            }
            function GoOutFullscreen() {
                if(document.exitFullscreen)
                    document.exitFullscreen();
                else if(document.mozCancelFullScreen)
                    document.mozCancelFullScreen();
                else if(document.webkitExitFullscreen)
                    document.webkitExitFullscreen();
                else if(document.msExitFullscreen)
                    document.msExitFullscreen();

            }
            function IsFullScreenCurrently() {
                var full_screen_element = document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement || null;

                // If no element is in full-screen
                if(full_screen_element === null)
                    return false;
                else
                    return true;
            }
            $("#go-button").on('click', function() {

                if(IsFullScreenCurrently())
                    GoOutFullscreen();
                else
                    GoInFullscreen($("#mu-hero").get(0));
            });
            $(document).on('fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange', function() {
                if(IsFullScreenCurrently()) {
                    $("#go-button").attr('src',image_path+"small_screen.png");
                    $("#go-button span").html('Minimize');

                }
                else {
                    $("#go-button").attr('src',image_path+"large_screen.png");
                    $("#go-button span").html('Maximize');

                }
            });

            $(window).on('resize', function(){
                resize();
            });

            resize();

        });
    </script>



    </body>
    </html>

<?php }else if($app_data['tracker_template_id'] == 3){ ?>



    <html>
    <head>
        <title>Appointment Tracker</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
        <meta name="description" content="" />
        <meta name="keywords" content="" />
        <?php echo $this->Html->css(array('third_tracker.css'),array("media"=>'all','fullBase' => true)); ?>
    </head>
    <body >


    <!-- Highlights -->
    <div id="element" class=" main_section" style="width: 100%;">
        <img src="<?php echo Router::url('/images/tracker/large_screen.png',true);?>" id="go-button"></img>
        <div class="shedow_div"></div>
        <div class="append_html">

            <h1 style="text-align: center;"> Please wait... </h1>

        </div>


    </div>

    </div>


    <!-- Scripts -->
    <script src="<?php echo Router::url('/js/jquery.js')?>"></script>
    <script src="<?php echo Router::url('/js/bootstrap.min.js')?>"></script>
    <script>
        $(document).ready(function(){

            var image_path = "<?php echo Router::url('/images/tracker/',true);?>";
            var doctor_id =0;
            var doctor_index =0;
            var doctor_id_string = "<?php echo $doctor_ids; ?>";
            var doctor_id_array = doctor_id_string.split(",");
            var total_doctor = doctor_id_array.length;
            if(total_doctor > 0){
                doctor_id = doctor_id_array[doctor_index];
            }

            load_list();
            var timer_count =0;
            var no_appointment_doctor = {};

            function setIndex(){

                console.log(doctor_id);
                doctor_index++;
                $("#"+doctor_id).hide();
                doctor_id = doctor_id_array[doctor_index];
                console.log(doctor_id);
                $("#"+doctor_id).show();

            }

            var tot_doctor = $('.main_div').length;
            var change_div = 30000;
            var load_list_time = total_doctor * change_div;



            setInterval(function () {
                if(process_running===false){
                    doctor_index=0;
                    showloader = false;
                    load_list();

                }
            },change_div);





            var process_running = false;


            Object.size = function(obj) {
                var size = 0, key;
                for (key in obj) {
                    if (obj.hasOwnProperty(key)) size++;
                }
                return size;
            };



            var interIneer;
            var index = 0;
            var showloader = false;
            function load_list(){

                var t = "<?php echo @($this->request->query['t']); ?>";
                var n = "<?php echo @($app_data['name']); ?>";
                var logo = "<?php echo @($app_data['logo']); ?>";
                var template_id = "<?php echo @($app_data['tracker_template_id']); ?>";
                var baseurl ="<?php echo Router::url('/',true);?>";
                $.ajax({
                    type:'POST',
                    url: baseurl+"tracker/load_tracker",
                    data:{
                        logo:logo,template_id:template_id,t:t,d:doctor_id,app_name:n,doctor_id_string:doctor_id_string
                    },
                    beforeSend:function(){
                        clearInterval(interIneer);
                        index =0;
                        if(showloader===true){
                        }
                        process_running = true;

                    },
                    success:function(data){

                        var x = new Date()
                        var x1=x.toUTCString();
                        var hour = (x.getHours() <10)?"0"+x.getHours():x.getHours();
                        var minute = (x.getMinutes() <10)?"0"+x.getMinutes():x.getMinutes();
                        var sec = (x.getSeconds() <10)?"0"+x.getSeconds():x.getSeconds();
                        console.log(hour+":"+minute+":"+sec);

                        $(".loader_div").hide();

                        $(".append_html").html(data);

                        doctor_id_array =[];
                        $('.main_div').each(function( index, value ) {
                            doctor_id_array.push($(this).attr('id'));
                        });
                        index = 0;

                        interIneer =  setInterval(function () {

                            if(doctor_id_array.length > 1){

                                $('.main_div').each(function( index, value ) {
                                    ($(this).hide());
                                });
                                $("#"+doctor_id_array[index]).show();
                                index++;
                                if(doctor_id_array.length == index){
                                    index=0;
                                }
                            }


                        },3000);

                        process_running = false;


                    },
                    error: function(data){
                        $(".loader_div").hide();
                        if(showloader===true){
                            // $.alert("Sorry something went wrong on server.");
                        }
                        process_running =false;

                    }
                });

            }

            /* Get into full screen */
            function GoInFullscreen(element) {
                if(element.requestFullscreen)
                    element.requestFullscreen();
                else if(element.mozRequestFullScreen)
                    element.mozRequestFullScreen();
                else if(element.webkitRequestFullscreen)
                    element.webkitRequestFullscreen();
                else if(element.msRequestFullscreen)
                    element.msRequestFullscreen();
            }

            /* Get out of full screen */
            function GoOutFullscreen() {
                if(document.exitFullscreen)
                    document.exitFullscreen();
                else if(document.mozCancelFullScreen)
                    document.mozCancelFullScreen();
                else if(document.webkitExitFullscreen)
                    document.webkitExitFullscreen();
                else if(document.msExitFullscreen)
                    document.msExitFullscreen();
            }

            /* Is currently in full screen or not */
            function IsFullScreenCurrently() {
                var full_screen_element = document.fullscreenElement || document.webkitFullscreenElement || document.mozFullScreenElement || document.msFullscreenElement || null;

                // If no element is in full-screen
                if(full_screen_element === null)
                    return false;
                else
                    return true;
            }

            $("#go-button").on('click', function() {
                if(IsFullScreenCurrently())
                    GoOutFullscreen();
                else
                    GoInFullscreen($("#element").get(0));
            });

            $(document).on('fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange', function() {
                if(IsFullScreenCurrently()) {
                    $("#go-button").attr('src',image_path+"small_screen.png");
                }
                else {
                    $("#go-button").attr('src',image_path+"large_screen.png");
                }
            });

            GoInFullscreen($("#element").get(0));

        });
    </script>

    </body>
    </html>


<?php } ?>